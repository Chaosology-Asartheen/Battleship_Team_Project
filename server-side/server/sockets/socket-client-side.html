<!doctype html>
<html>
  <head>
  </head>
  <body>

    <script src="/primus/primus.js"></script>
    <script> 
      const { nanoid } = require('nanoid');
      const primus = new Primus();
      const $ = (s, p = document) => p.querySelector(s);
      const play = 'play';
      const ready = 'ready';
      const player_room = nanoid();
      let player_board;
      let other_player_board;
      let player_turn;

      // play button
      const play_button = () => {
        primus.write({ room: player_room, action: play });
      }

      // ready button
      const ready_button = () => {
        if (other_player_board) {
          primus.write({ room: player_room, action: ready, board: player_board });
        }
        else{
          // activating random turn generator
          primus.write({ room: player_room, action: ready, board: player_board, turn : "some turn"});
        }
      }

      // onclick (on the grid)
      const player_guess = () => {
        // checking with the other_player_board if bulzai and return result to the server.
        primus.write({ room: player_room, guess: "hit/miss... (sending the new array or position + value?)"});
      }

      primus.on('data', data => {
        
        // need to be solved (what is board?)
        if (data === board) {
          other_player_board = board;
          // reactivating the grid.
        }
        else if (data === { board , turn }){
          other_player_board = board;
          player_turn = turn;
        }
        else if (data === guess){
          // updating the board (array);
        }





      });

    </script>
  </body>
</html>